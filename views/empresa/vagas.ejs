<!-- views/empresa/vagas.ejs -->
<%- include('./header') %>
  <style>
    /* Estilizando a caixa de sugestões */
    .autocomplete-suggestions {
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 4px;
      max-height: 200px;
      overflow-y: auto;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      z-index: 1000;
    }

    /* Estilizando cada sugestão */
    .autocomplete-suggestions .suggestion {
      padding: 10px;
      cursor: pointer;
      font-size: 14px;
      color: #333;
    }

    /* Sugestão ao passar o mouse */
    .autocomplete-suggestions .suggestion:hover {
      background-color: #f0f0f0;
    }

    /* Sugestão selecionada */
    .autocomplete-suggestions .suggestion.active {
      background-color: #e0e0e0;
      font-weight: bold;
    }

    .main-login {
      background: #01162a;
    }

    .checkbox-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }

    .checkbox-item {
      display: flex;
      align-items: center;
      gap: 5px;
      min-width: 150px;
    }

    .checkbox-item input[type="checkbox"] {
      width: auto;
      margin-right: 5px;
    }

    .checkbox-item label {
      margin: 0;
      font-weight: normal;
    }

    .checkbox-group.required {
      border: 1px solid transparent;
      padding: 10px;
      border-radius: 4px;
    }

    .checkbox-group.required.error {
      border-color: #ff0000;
      background-color: rgba(255, 0, 0, 0.05);
    }

    /* Estilo para campos obrigatórios não preenchidos */
    select:invalid,
    input:invalid,
    textarea:invalid {
      border-color: #ff0000;
    }

    .label-info {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .info-icon {
      position: relative;
      color: #F78E0F;
      cursor: help;
      font-size: 12px;
      background: #F78E0F;
      color: white;
      padding: 2px 8px;
      border-radius: 4px;
    }

    .info-icon .tooltip {
      visibility: hidden;
      width: 250px;
      background-color: #333;
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 10px;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 14px;
      font-weight: normal;
      line-height: 1.4;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .info-icon .tooltip::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      margin-left: -5px;
      border-width: 5px;
      border-style: solid;
      border-color: #333 transparent transparent transparent;
    }

    .info-icon:hover .tooltip {
      visibility: visible;
      opacity: 1;
    }

    .whatsapp-support {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      text-align: center;
    }

    .whatsapp-support p {
      color: #fff;
      margin-bottom: 15px;
      font-size: 16px;
    }

    .whatsapp-button {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: #25D366;
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
      box-shadow: 0 4px 6px rgba(37, 211, 102, 0.2);
    }

    .whatsapp-button:hover {
      background: #1fa855;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(37, 211, 102, 0.3);
    }

    .whatsapp-button:active {
      transform: translateY(0);
    }

    .whatsapp-support {
      width: 100%;
    }

    .cidade-estado-group {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 10px;
      margin-bottom: 20px;
    }

    .cidade-estado-group input,
    .cidade-estado-group select {
      margin: 0;
    }

    input[type="date"] {
      width: 100%;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      margin-bottom: 20px;
      color: #333;
      background-color: white;
    }

    input[type="date"]:focus {
      border-color: #F78E0F;
      outline: none;
    }
  </style>

  <style>
    .degrade-header {
      background: linear-gradient(to top right, #0d0b0a, #2c1b17, #5a1e12);
      height: 350px;
      width: 100%;
      border-radius: 0px 0px 77px 77px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .content-degrade-header {
      max-width: 1200px;
      padding: 180px 50px;
      width: 100%;
    }

    .linha-branca {
      height: 1px;
      width: 100%;
      background-color: white;
      margin-bottom: 20px;
    }

    .degrade-breadcrumb {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .degrade-breadcrumb h1 {
      color: white;
      font-size: 47px;
      font-weight: 300;
    }

    .links-bread a {
      text-decoration: none;
      color: white;
      font-size: 16px;
    }

    .links-bread span {
      color: #FF5E00;
    }
  </style>
  <div class="degrade-header">
    <div class="content-degrade-header">
      <div class="linha-branca"></div>
      <div class="degrade-breadcrumb">
        <div class="links-bread">
          <a href="">Início</a> <span>/</span> <a href="">Área da Empresa</a>
        </div>
        <h1>Área da Empresa</h1>
      </div>
    </div>
  </div>


  <style>
    .main-dashboard-candidato-novo {
      max-width: 1200px;
      margin: auto;
      padding: 70px 20px;
    }

    .lancar-cursos-novo {
      display: flex;
      gap: 20px;
      margin-bottom: 30px;
    }



    .cabecalho-candidato-novo h1 {
      font-size: 24px;
      margin-bottom: 20px;
    }



    .editar-dados-novo {
      margin-bottom: 20px;
    }

    .editar-dados-novo a {
      background: #F78E0F;
      color: white;
      text-decoration: none;
      padding: 10px 20px;
      border-radius: 5px;
    }



    .dashboard-actions {
      margin-top: 30px;
      display: flex;
      gap: 20px;
    }

    .dashboard-actions a {
      background: #F78E0F;
      color: white;
      text-decoration: none;
      padding: 10px 20px;
      border-radius: 5px;
    }

    /* Novos estilos para os formulários */
    .linha {
      height: 1px;
      background-color: #E6E7E8;
      margin: 30px 0;
    }

    .conteudo-form {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-bottom: 30px;
    }

    .campo-dados {
      display: flex;
      gap: 8px;
    }

    .campo-dados label {
      font-weight: 500;
      color: #333;
    }

    .campo-dados input,
    .campo-dados textarea {
      padding: 10px;
      border: 2px solid #E6E7E8;
      border-radius: 5px;
      font-size: 14px;
    }

    .campo-dados textarea {
      min-height: 100px;
      resize: vertical;
    }

    .campo-dados input[type="file"] {
      border: none;
      padding: 0;
    }

    button[type="submit"] {
      background: #F78E0F;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s ease;
    }

    button[type="submit"]:hover {
      background: #e07d0d;
    }

    .error-message {
      color: #dc3545;
      margin-bottom: 20px;
      padding: 10px;
      background-color: #f8d7da;
      border: 1px solid #f5c6cb;
      border-radius: 5px;
    }

    .success-message {
      color: #155724;
      margin-bottom: 20px;
      padding: 10px;
      background-color: #d4edda;
      border: 1px solid #c3e6cb;
      border-radius: 5px;
    }

    @media (max-width: 768px) {
      .conteudo-form {
        gap: 15px;
      }

      .campo-dados input,
      .campo-dados textarea {
        font-size: 16px;
        /* Melhor para mobile */
      }
    }
  </style>
  <style>
    .lancar-cursos-novo {
      border-bottom: 1px solid #E6E7E8;
    }

    .lancar-cursos-novo a {
      text-decoration: none;
      color: #6E7583;
      padding-bottom: 10px;
    }

    .lancar-cursos-novo a:hover {
      color: #F78E0F !important;
    }

    .vigente {
      color: #F78E0F !important;
      border-bottom: 1px solid #F78E0F;
      margin-bottom: -1px;
    }

    .cabecalho-candidato-novo>p:nth-child(1) {
      font-size: 20px;
      font-weight: 500;
      color: #3D4047;
      margin-bottom: 7px;
    }

    .cabecalho-candidato-novo>p:nth-child(2) {
      font-size: 16px;
      color: #6E7583;
      margin-bottom: 23px;
    }

    .campo-dados {
      display: flex;
      border-top: 2px solid #E6E7E8;
      padding: 27px 0px;
    }

    .campo-dados label {
      display: flex;
      align-items: center;
      width: 320px;
    }

    .campo-dados input {
      width: 550px;
      border: 2px solid #E6E7E8;
      padding: 10px;
      border-radius: 5px;
    }

    .campo-dados textarea {
      width: 550px;
      border: 2px solid #E6E7E8;
      padding: 10px;
      border-radius: 5px;
    }

    .campo-dados select {
      width: 550px;
      border: 2px solid #E6E7E8;
      padding: 10px;
      border-radius: 5px;
    }

    .form-group {
      display: flex;
      border-top: 2px solid #E6E7E8;
      padding: 27px 0px;
    }

    .form-group label {
      display: flex;
      width: 320px;
    }

    .radio-group {
      display: flex;
      gap: 20px;
    }

    .radio-group label {
      width: unset;
    }

    .checkbox-group .radio-item label {
      width: unset;
    }

    .checkbox-group {
      display: flex;
      gap: 50px;
    }

    .radio-item {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .alinha-submit {
      width: 100%;
      display: flex;
      justify-content: flex-end;
    }

    .alinha-submit button {
      color: white;
      font-size: 16px;
      border: none;
      border-radius: 80px;
      padding: 5px 10px;
      background: #FF5E00;
      cursor: pointer;
    }

    .cursos-lancados li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #E6E7E8;
      padding: 20px 0px;
    }

    .cursos-lancados button {
      color: white;
      font-size: 16px;
      border: none;
      border-radius: 80px;
      padding: 5px 10px;
      background: #FF5E00;
      cursor: pointer;
    }

    .minhas-exp-registro li {
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #E6E7E8;
      padding: 20px 0px;
    }

    .minhas-exp-registro button {
      color: white;
      font-size: 16px;
      border: none;
      border-radius: 80px;
      padding: 5px 10px;
      background: #FF5E00;
      cursor: pointer;
    }

    .minhas-exp-registro h2 {
      font-size: 20px;
      font-weight: 500;
      color: #3D4047;
      margin-bottom: 7px;
    }

    .checkbox-group {
      width: 550px;
    }

    .campo-dados-radios {
      display: flex;
      border-top: 2px solid #E6E7E8;
      padding: 27px 0px;
    }

    .campo-dados-radios label {
      display: flex;
      align-items: center;
      width: 320px;
    }

    .campo-dados-duplos {
      display: flex;
      border-top: 2px solid #E6E7E8;
      padding: 27px 0px;
    }

    .campo-dados-duplos label {
      display: flex;
      align-items: center;
      width: 320px;
    }

    .cidade-estado-group input {
      width: 550px;
      border: 2px solid #E6E7E8;
      padding: 10px;
      border-radius: 5px;
    }

    .cidade-estado-group select {
      width: 77px;
      border: 2px solid #E6E7E8;
      padding: 10px;
      border-radius: 5px;
    }
    .botoes-gerenciar-vagas a {
      color: #F2F2F2;
    border-radius: 9999px;
    border: none;
    text-decoration: none;
    font-size: 16px;
    font-weight: 400;
    display: flex;
    align-items: center;
    justify-content: center;
    }
    .meus-dados-novo li {
      border-top: 2px solid #E6E7E8;
      padding: 27px 0px;
    }
    .vaga-card h3 {
      font-size: 20px;
    font-weight: 500;
    color: black;
    margin-bottom: 7px;
    }
    .vaga-info strong {
      font-weight: bold;
    }
    .excluirvaga {
      color: #F2F2F2;
    border-radius: 9999px;
    border: none;
    text-decoration: none;
    font-size: 16px;
    font-weight: 400;
    display: flex;
    align-items: center;
    justify-content: center;
    }
    .excluirvaga {
      background: red !important;
    }
    .vercandidato {
      background: #858785 !important;
    }
    .alinha-info-vaga {
      display: flex;
    gap: 75px;
    margin-bottom: 20px;
    }
    .vaga-info, .vaga-info {
      display: flex;
    flex-direction: column;
    gap: 17px;
    }
    @media (max-width: 768px) {
      .checkbox-group {
        flex-wrap: wrap;
        gap: 5px;
      }

      .degrade-breadcrumb {
        flex-wrap: wrap;
        gap: 10px;
      }

      .minhas-exp-registro li {
        flex-wrap: wrap;
        gap: 20px;
      }

      .minhas-exp-registro {
        padding-top: 35px;
      }
    }
  </style>
  <section class="candidato-superior-novo">
    <div class="main-dashboard-candidato-novo">
      <div class="lancar-cursos-novo">
        <a href="/empresa/dashboard">Meus Dados</a>
        <a href="/empresa/vagas/criar">Criar Vaga</a>
        <a href="/empresa/vagas" class="vigente"">Minhas Vagas</a>
      </div>

      <div class="cabecalho-candidato-novo">
        <p>Suas Vagas</p>
      </div>
      <div class="meus-dados-novo">

        <ul>
          <% if (vagas.length===0) { %>
            <p>Nenhuma vaga criada.</p>
            <% } else { %>
              <% vagas.forEach(vaga=> { %>
                <li>
                  <div class="alinha-info-vaga">
                    <div class="vaga-card">
                      <h3>
                        <%= vaga.titulo %>
                      </h3>
                      <div class="vaga-info">
                        <div class="vaga-status">
                          <% if (vaga.vagaPcd==='Sim' ) { %>
                            <span class="badge pcd">Vaga PCD</span>
                            <% } %>
                              <span class="badge location"><i class="fas fa-map-marker-alt"></i>
                                <%= vaga.cidade %>/<%= vaga.uf %>
                              </span>
                        </div>
                        <p><strong>Cargo:</strong>
                          <%= vaga.cargo %>
                        </p>
                        <p><strong>Tipo de Contrato:</strong>
                          <%= vaga.tipoContrato %>
                        </p>
                        <p><strong>Faixa Salarial:</strong>
                          <%= vaga.faixaSalarial %>
                        </p>
                        <p><strong>Localização:</strong>
                          <%= vaga.cidade %>/<%= vaga.uf %>
                        </p>
                        <p><strong>Vaga PCD:</strong>
                          <%= vaga.vagaPcd %>
                        </p>
                        <p><strong>Data Limite:</strong>
                          <%= new Date(vaga.dataLimite).toLocaleDateString('pt-BR') %>
                        </p>
                        <p><strong>Quantidade de Vagas:</strong>
                          <%= vaga.quantidadeVagas %>
                        </p>
                        <p><strong>CNH Necessária:</strong>
                          <%= Array.isArray(vaga.cnh) && vaga.cnh.length> 0 ? vaga.cnh.join(', ') : 'Não informado' %>
                        </p>
                        <p><strong>Candidaturas:</strong>
                          <%= vaga.candidaturas ? vaga.candidaturas.length : 0 %>
                        </p>
                        <p><strong>Visualizações:</strong> <span class="visualizacoes"><i class="fas fa-eye"></i>
                            <%= vaga.visualizacoes %>
                          </span></p>
                      </div>
                    </div>
                    <div class="vaga-info">
                      <p><strong>Descrição:</strong></p>
                      <p class="vaga-descrita"><%- vaga.descricao.replace(/\n/g, '<br>' ) %></p>
                      <p><strong>Disponibilidade:</strong>
                        <%= vaga.disponibilidade || 'Não especificado' %>
                      </p>
                      <div class="horario-trabalho">
                        <strong>Horário de Trabalho:</strong>
                        <span><%- (vaga.horarioTrabalho || 'Não especificado' ).replace(/\n/g, '<br>' ) %></span>
                      </div>
                      <p><strong>Tipo de Trabalho:</strong>
                        <%= vaga.tipoTrabalho %>
                      </p>
                      <p><strong>Escolaridade:</strong>
                        <%= vaga.escolaridade %>
                      </p>
                      <p><strong>Idiomas:</strong>
                        <%= vaga.idiomas.length> 0 ? vaga.idiomas.join(', ') : 'Não especificado' %>
                      </p>
                      <p><strong>Benefícios:</strong>
                        <%= vaga.beneficios.length> 0 ? vaga.beneficios.join(', ') : 'Não especificado' %>
                      </p>
                      <p><strong>Tags:</strong>
                        <%= vaga.tags.length> 0 ? vaga.tags.join(', ') : 'Não especificado' %>
                      </p>
                    </div>
                  </div>
                  

                  <div class="botoes-gerenciar-vagas">
                    <a class="vercandidato" href="/empresa/vagas/<%= vaga.id %>/candidatos">Ver Candidatos</a>
                    <a class="editarvaga" href="/empresa/vagas/<%= vaga.id %>/editar">Editar</a>
                    <form action="/empresa/vagas/excluir/<%= vaga.id %>" method="POST">
                      <button class="excluirvaga" type="submit">Excluir</button>
                    </form>
                  </div>
                </li>
                <% }) %>
                  <% } %>
        </ul>

        <!-- Paginação -->
        <nav class="pagination">
          <% if (currentPage> 1) { %>
            <a href="/empresa/vagas?page=<%= currentPage - 1 %>">Anterior</a>
            <% } %>

              <% for (let i=1; i <=totalPages; i++) { %>
                <a href="/empresa/vagas?page=<%= i %>" class="<%= i === currentPage ? 'active' : '' %>">
                  <%= i %>
                </a>
                <% } %>

                  <% if (currentPage < totalPages) { %>
                    <a href="/empresa/vagas?page=<%= currentPage + 1 %>">Próxima</a>
                    <% } %>
        </nav>
      </div>
    </div>
  </section>
  <%- include('../partials/footer') %>

   